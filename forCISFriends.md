# Руководство к тестированию плагина

## 1. Установка среды для тестирования.

Чтобы тестировать плагин и добавлять ваших кастомных мобов, необходимо создать и запустить сервер с данным плагином.

### Установка сервера:
1. Скачайте ядро Paper. Желательно использовать версию 1.18.1, т.к. на 1.18.2 плагин еще не тестировался, но вы можете всегда проверить работу плагина на данной версии и написать мне, работает ли)

Версии:
[1.18.1](https://papermc.io/ci/job/Paper-1.18.1/lastStableBuild/artifact/paperclip.jar),
[1.18.2](https://papermc.io/ci/job/Paper-1.18.2/lastStableBuild/artifact/paperclip.jar)

5. Создайте папку, где будет храниться ваш сервер, а затем переместите файл ядра в эту папку, и переменуйте ядро в `server.jar`
6. В папке создайте текстовый документ, и вставьте в него данную строку запуска:
```text
java -Xmx1024M -Xms1024M -jar server.jar -nogui
```
Подробнее:
`-Xmx` и `-Xms` - границы использования оперативной памяти. Рекомендуется ставить обе границы на одно и то же значение, чтобы избежать проблем в будущем.

`-jar server.jar` - запуск ядра с названием `server.jar`. Если вы не хотите переименовывать ядро на `server.jar`, то просто измените название ядра в строке запуска, на то что вы хотите, и также переименуйте ядро на то, что вы хотите.

4. Сохраните текстовый документ, затем назовите его как хотите, и измените расширение файла на `.bat`.
5. Просто запустите этот файл, затем дождитесь загрузки сервера, и зайдите по IP: `localhost`.
6. Нужны будут права администратора (в простонародии опка). Чтобы выдать опку, напишите в консоль `op ваш_ник`.

## 2. Установка плагина.

1. Скачайте плагин по [ссылке](https://github.com/bottleofench/mMobs/releases/download/0.1/mMobs-1.0-SNAPSHOT.jar).
2. Переместите его в папку `plugins`, находящуюся в папке сервера.
3. Запустите сервер, если он выключен.

Если сервер включен, то либо выключите его командой `stop` в консоли, и потом заново включите, либо пропишите команду `reload confirm`, что менее безопасно, чем просто выключить и включить, однако намного быстрее.

## 3. Непосредственно тестирование плагина.

Плагин добавляет кастомных мобов, и изменяет старых, благодаря специальным файлам с расширением `.yml`.

<hr>

### Создание файла настройки вашего кастомного моба:

Разберём функционал плагина на примере файла `Amogus.yml`:
```yaml
customName: "Amogus"
customNameVisible: true
type: ZOMBIE
health: 20
isBaby: false
visualFire: false
canPickupItems: true
removeWhenFarAway: true
spawnInNature: true
spawnInNatureChance: 100
silent: false
attributes:
  GENERIC_ARMOR: 1.0
effects:
  SPEED: 1
equipment:
  ITEM_IN_MAIN_HAND:
    type: IRON_AXE
    amount: 1
    damage: 0
    unbreakable: false
    dropChance: 100
    enchantments:
      MENDING: 1
```

<hr>

**Итак, начнём:**

В вашем файле обязан присутствовать параметр `type` - тип вашего моба. Соответственно, если тип не указан, но моб не может быть создан. Все возможные типы мобов, которые можно указать, доступны [здесь](https://papermc.io/javadocs/paper/1.18/org/bukkit/entity/EntityType.html).
Также учитывайте, что моб должен иметь интеллект, здоровье, и т.п. (Например: стойка для брони не подходит).

Остальные параметры могут отсутствовать, и по ним не будет изменения.

<hr>

Разберём остальные параметры:

`health` - здоровье вашего моба. Указанное здоровье должно быть всегда больше нуля.

`customName` - название вашего моба. Должно быть указано в кавычках.

`customNameVisible` - будет ли видно название вашего моба? Принимаются так называемые "булевы значения". К булевым значениям относятся `true` (да) и `false` (нет). Во всех подобных параметрах также будут использоваться булевы значения.

`isBaby` - ваш моб - детская версия типа вашего моба?

`visualFire` - будет ли гореть ваш моб? Огонь будет визуальным, и не будет наносить урона мобу.

`canPickupItems` - сможет ли ваш моб поднимать предметы? 

`removeWhenFarAway` - будет ли деспаниться ваш моб при отгрузке чанков? Чтобы не было проблем, лучше указывайте `false` (Недо-деспавн)

`spawnInNature` - будет ли ваш моб появляться, скажем так, в природе, обычном выживании?

`spawnInNatureChance` - с каким шансом при спавне моба, с тем типом что и у вашего моба, плагин будет заменять ванильного моба на вашего. (0 - ни с каким, 100 - всегда)

`silent` - будет ли ваш моб тихим (не будет издавать звуков)?

`attributes` - набор аттрибутов - параметров каждого моба. В данной группе параметров указывается название аттрибута, и его значение. Все доступные аттрибуты указаны [здесь](https://hub.spigotmc.org/javadocs/spigot/org/bukkit/attribute/Attribute.html).

`effects` - набор эффектов для вашего моба. Накладываются навсегда. В данной группе указывается название эффекта, и его сила. Заметьте, что то число, которое вы указываете, на 1 меньше чем уровень эффекта в игре. Связано это с тем, что в программировании отсчет циклов и других вещей ведут с нуля. Все доступные эффекты находятся [здесь](https://papermc.io/javadocs/paper/1.18/org/bukkit/potion/PotionEffectType.html).

`equipment` - набор снаряжения вашего моба. В данной группе указываются названия слотов снаряжения вашего моба, а уже к ним прикрепляются другие параметры. 

Рассмотрим их:

`type` - тип предмета в указанном слоте. Все типы предметов указаны [здесь](https://papermc.io/javadocs/paper/1.18/org/bukkit/Material.html).

`amount` - количество предмета в слоте. (Максимальное кол-во - размер стака этого типа предмета).

`damage` - на сколько прочности будет разрушен предмет в слоте? (Если указано 5, то прочность предмета уменьшится на 5 от полной прочности).

`unbreakable` - будет ли предмет в слоте неразрушимым?

`dropChance` - с каким шансом предмет будет выпадать при смерти моба. (0 - никогда, 100 - всегда)

`enchantments` - набор зачарований на предмете. В данной группе указывается название зачарования и его уровень. Все доступные зачарования находятся [здесь](https://papermc.io/javadocs/paper/1.18/org/bukkit/enchantments/Enchantment.html). (Здесь не работает правило про отсчет с нуля).

<hr>

Yml файлы очень чуствительны к табуляции (отступам строк), поэтому будьте осторожны.

При изменении файла, перезапускать плагин не нужно.

### Добавление и спавн моба:

Для того, чтобы добавить вашего моба, нужно добавить файл c настройками вашего моба в папку `plugins/MMobs/data`

Заспавнить моба можно двумя способами:
1. Командой
2. Естественный спавн.

Чтобы заспавнить моба командой, необходимо ввести команду `/mmobs spawn [название файла настроек, вместе с расширением]`. Во время написания команды будут предложены все доступные файлы настроек.

Также, если в настройках включён естественный спавн моба (`spawnInNature`), то плагин будет самостоятельно заменять ванильных мобов на ваших, при их спавне.